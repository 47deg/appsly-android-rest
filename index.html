<!DOCTYPE html>
<html>

  <head>
    <meta charset='utf-8' />
    <meta http-equiv="X-UA-Compatible" content="chrome=1" />
    <meta name="description" content="Restrung : Android client library for RESTful services" />

    <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/stylesheet.css">

    <title>Restrung</title>
  </head>

  <body>

    <!-- HEADER -->
    <div id="header_wrap" class="outer">
        <header class="inner">
          <a id="forkme_banner" href="https://github.com/47deg/restrung">View on GitHub</a>

          <h1 id="project_title">Restrung</h1>
          <h2 id="project_tagline">Android client library for RESTful services</h2>

            <section id="downloads">
              <a class="zip_download_link" href="https://github.com/47deg/restrung/zipball/master">Download this project as a .zip file</a>
              <a class="tar_download_link" href="https://github.com/47deg/restrung/tarball/master">Download this project as a tar.gz file</a>
            </section>
        </header>
    </div>

    <!-- MAIN CONTENT -->
    <div id="main_content_wrap" class="outer">
      <section id="main_content" class="inner">
        <h1>Restrung</h1>

<p>Android client library to <a href="http://en.wikipedia.org/wiki/Representational_state_transfer">RESTful</a> services</p>

<p><strong>Table of Contents</strong>  <em>generated with <a href="http://doctoc.herokuapp.com/">DocToc</a></em></p>

<ul>
<li><a href="#restrung">Restrung</a></li>
<li><a href="#introduction">Introduction</a></li>
<li>
<a href="#download">Download</a>

<ul>
<li><a href="#maven-dependency">Maven Dependency</a></li>
<li><a href="#apklib-and-others">APKLib and others</a></li>
</ul>
</li>
<li>
<a href="#usage">Usage</a>

<ul>
<li>
<a href="#simple">Simple</a>

<ul>
<li><a href="#get">GET</a></li>
<li><a href="#post">POST</a></li>
<li><a href="#put">PUT</a></li>
<li><a href="#delete">DELETE</a></li>
</ul>
</li>
<li>
<a href="#advanced">Advanced</a>

<ul>
<li><a href="#loaders">Loaders</a></li>
<li><a href="#asynctasks">AsyncTasks</a></li>
<li><a href="#runnables">Runnables</a></li>
<li>
<a href="#cache">Cache</a>

<ul>
<li><a href="#load-policies">Load Policies</a></li>
<li><a href="#direct-access">Direct access</a></li>
</ul>
</li>
<li><a href="#serialization">Serialization</a></li>
<li><a href="#interceptors">Interceptors</a></li>
</ul>
</li>
</ul>
</li>
</ul><h1>Introduction</h1>

<p>Restrung was born out of the need to provide a clear and easy interface for Android apps @ <a href="http://47deg.com">47 degrees</a> to RESTful and HTTP based web services.
Contributions and constructive feedback are welcome.</p>

<h1>Download</h1>

<h2>Maven Dependency</h2>

<p>Restrung may be automatically imported in your project if you already use <a href="http://maven.apache.org/">Maven</a>. Just declare restrung as a maven dependency.</p>

<div class="highlight"><pre><span class="nt">&lt;dependency&gt;</span>
    <span class="nt">&lt;groupId&gt;</span>org.restrung<span class="nt">&lt;/groupId&gt;</span>
    <span class="nt">&lt;artifactId&gt;</span>restrung<span class="nt">&lt;/artifactId&gt;</span>
    <span class="nt">&lt;version&gt;</span>1.0-SNAPSHOT<span class="nt">&lt;/version&gt;</span>
<span class="nt">&lt;/dependency&gt;</span>
</pre></div>

<h2>APKLib and others</h2>

<p>You can get releases, snapshots and other forms in which Restrung is distributed in the <a href="https://github.com/47deg/restrung/downloads">Downloads</a> page.</p>

<h1>Usage</h1>

<p>Whether you plan to use Restrung for simple http requests to a RESTful service or you need more control over requests, serialization, etc.
We encourage you to read this short guide to fully understand what RESTRung is and what's not.</p>

<h2>Simple</h2>

<p>The main interface to send requests and receive serialize responses is through the RestClient which default implementation you can access with the RestClientFactory
The RestClient exposes both Asynchronous and Synchronous operations for the most commons <a href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec9.html">HTTP verbs</a>.</p>

<h3>GET</h3>

<div class="highlight"><pre><span class="n">RestClientFactory</span><span class="o">.</span><span class="na">getClient</span><span class="o">().</span><span class="na">getAsync</span><span class="o">(</span><span class="k">new</span> <span class="n">ContextAwareAPIDelegate</span><span class="o">&lt;</span><span class="n">Target</span><span class="o">&gt;(</span><span class="n">context</span><span class="o">,</span> <span class="n">Target</span><span class="o">.</span><span class="na">class</span><span class="o">)</span> <span class="o">{</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onResults</span><span class="o">(</span><span class="n">Target</span> <span class="n">response</span><span class="o">)</span> <span class="o">{</span>
        <span class="c1">//handle results here in the main thread</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onError</span><span class="o">(</span><span class="n">Throwable</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
        <span class="c1">//handle error here in the main thread</span>
    <span class="o">}</span>

<span class="o">},</span> <span class="s">"http://url/%s/%s"</span><span class="o">,</span> <span class="s">"param1"</span><span class="o">,</span> <span class="s">"param2"</span><span class="o">);</span>
</pre></div>

<h3>POST</h3>

<p><em>Simple POST</em></p>

<div class="highlight"><pre><span class="c1">//An object that implements JSONSerializable</span>
<span class="n">AnyBeanObject</span> <span class="n">sourceObject</span> <span class="o">=</span> <span class="k">new</span> <span class="n">AnyBeanObject</span><span class="o">();</span>
<span class="n">sourceObject</span><span class="o">.</span><span class="na">setName</span><span class="o">(</span><span class="s">"name"</span><span class="o">);</span>

<span class="n">RestClientFactory</span><span class="o">.</span><span class="na">getClient</span><span class="o">().</span><span class="na">postAsync</span><span class="o">(</span><span class="k">new</span> <span class="n">ContextAwareAPIDelegate</span><span class="o">&lt;</span><span class="n">Target</span><span class="o">&gt;(</span><span class="n">context</span><span class="o">,</span> <span class="n">Target</span><span class="o">.</span><span class="na">class</span><span class="o">)</span> <span class="o">{</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onResults</span><span class="o">(</span><span class="n">Target</span> <span class="n">response</span><span class="o">)</span> <span class="o">{</span>
        <span class="c1">//handle results here in the main thread</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onError</span><span class="o">(</span><span class="n">Throwable</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
        <span class="c1">//handle error here in the main thread</span>
    <span class="o">}</span>

<span class="o">},</span> <span class="s">"http://url/%s/%s"</span><span class="o">,</span> <span class="n">sourceObject</span> <span class="o">,</span> <span class="s">"param1"</span><span class="o">,</span> <span class="s">"param2"</span><span class="o">);</span>
</pre></div>

<p><em>Multipart POST</em></p>

<div class="highlight"><pre><span class="n">File</span> <span class="n">file</span> <span class="o">=</span> <span class="o">....;</span>

<span class="c1">//An object that implements JSONSerializable</span>
<span class="n">AnyBeanObject</span> <span class="n">sourceObject</span> <span class="o">=</span> <span class="k">new</span> <span class="n">AnyBeanObject</span><span class="o">();</span>
<span class="n">sourceObject</span><span class="o">.</span><span class="na">setName</span><span class="o">(</span><span class="s">"name"</span><span class="o">);</span>

<span class="n">RestClientFactory</span><span class="o">.</span><span class="na">getClient</span><span class="o">().</span><span class="na">postAsync</span><span class="o">(</span><span class="k">new</span> <span class="n">ContextAwareAPIDelegate</span><span class="o">&lt;</span><span class="n">Target</span><span class="o">&gt;(</span><span class="n">context</span><span class="o">,</span> <span class="n">Target</span><span class="o">.</span><span class="na">class</span><span class="o">)</span> <span class="o">{</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onResults</span><span class="o">(</span><span class="n">Target</span> <span class="n">response</span><span class="o">)</span> <span class="o">{</span>
        <span class="c1">//handle results here in the main thread</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onError</span><span class="o">(</span><span class="n">Throwable</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
        <span class="c1">//handle error here in the main thread</span>
    <span class="o">}</span>

<span class="o">},</span> <span class="s">"http://url/%s/%s"</span><span class="o">,</span> <span class="n">sourceObject</span><span class="o">,</span> <span class="n">file</span> <span class="o">,</span> <span class="s">"param1"</span><span class="o">,</span> <span class="s">"param2"</span><span class="o">);</span>
</pre></div>

<h3>PUT</h3>

<div class="highlight"><pre><span class="c1">//An object that implements JSONSerializable</span>
<span class="n">AnyBeanObject</span> <span class="n">sourceObject</span> <span class="o">=</span> <span class="k">new</span> <span class="n">AnyBeanObject</span><span class="o">();</span>
<span class="n">sourceObject</span><span class="o">.</span><span class="na">setName</span><span class="o">(</span><span class="s">"name"</span><span class="o">);</span>

<span class="n">RestClientFactory</span><span class="o">.</span><span class="na">getClient</span><span class="o">().</span><span class="na">putAsync</span><span class="o">(</span><span class="k">new</span> <span class="n">ContextAwareAPIDelegate</span><span class="o">&lt;</span><span class="n">Target</span><span class="o">&gt;(</span><span class="n">context</span><span class="o">,</span> <span class="n">Target</span><span class="o">.</span><span class="na">class</span><span class="o">)</span> <span class="o">{</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onResults</span><span class="o">(</span><span class="n">Target</span> <span class="n">response</span><span class="o">)</span> <span class="o">{</span>
        <span class="c1">//handle results here in the main thread</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onError</span><span class="o">(</span><span class="n">Throwable</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
        <span class="c1">//handle error here in the main thread</span>
    <span class="o">}</span>

<span class="o">},</span> <span class="s">"http://url/%s/%s"</span><span class="o">,</span> <span class="n">sourceObject</span> <span class="o">,</span> <span class="s">"param1"</span><span class="o">,</span> <span class="s">"param2"</span><span class="o">);</span>
</pre></div>

<h3>DELETE</h3>

<div class="highlight"><pre><span class="n">RestClientFactory</span><span class="o">.</span><span class="na">getClient</span><span class="o">().</span><span class="na">deleteAsync</span><span class="o">(</span><span class="k">new</span> <span class="n">ContextAwareAPIDelegate</span><span class="o">&lt;</span><span class="n">Target</span><span class="o">&gt;(</span><span class="n">context</span><span class="o">,</span> <span class="n">Target</span><span class="o">.</span><span class="na">class</span><span class="o">)</span> <span class="o">{</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onResults</span><span class="o">(</span><span class="n">Target</span> <span class="n">response</span><span class="o">)</span> <span class="o">{</span>
        <span class="c1">//handle results here in the main thread</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onError</span><span class="o">(</span><span class="n">Throwable</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
        <span class="c1">//handle error here in the main thread</span>
    <span class="o">}</span>

<span class="o">},</span> <span class="s">"http://url/%s/%s"</span><span class="o">,</span> <span class="s">"param1"</span><span class="o">,</span> <span class="s">"param2"</span><span class="o">);</span>
</pre></div>

<h2>Advanced</h2>

<p>If you don't wish to use the RestClientFactory and RestClient interfaces you can get finer control by directly utilizing any of the
loaders, asynctasks or runnable classes for each one of the operations.</p>

<h3>Loaders</h3>

<ul>
<li>GET - <a href="https://github.com/47deg/restrung/blob/master/src/main/java/org/restrung/rest/async/loaders/APIGetLoader.java">org.restrung.rest.async.loaders.APIGetLoader</a>
</li>
<li>POST - <a href="https://github.com/47deg/restrung/blob/master/src/main/java/org/restrung/rest/async/loaders/APIPostLoader.java">org.restrung.rest.async.loaders.APIPostLoader</a>
</li>
<li>PUT - <a href="https://github.com/47deg/restrung/blob/master/src/main/java/org/restrung/rest/async/loaders/APIPutLoader.java">org.restrung.rest.async.loaders.APIPutLoader</a>
</li>
<li>DELETE - <a href="https://github.com/47deg/restrung/blob/master/src/main/java/org/restrung/rest/async/loaders/APIDeleteLoader.java">org.restrung.rest.async.loaders.APIDeleteLoader</a>
</li>
</ul><h3>AsyncTasks</h3>

<ul>
<li>GET - <a href="https://github.com/47deg/restrung/blob/master/src/main/java/org/restrung/rest/async/asynctasks/APIGetAsyncTask.java">org.restrung.rest.async.asynctasks.APIGetAsyncTask</a>
</li>
<li>POST - <a href="https://github.com/47deg/restrung/blob/master/src/main/java/org/restrung/rest/async/asynctasks/APIPostAsyncTask.java">org.restrung.rest.async.asynctasks.APIPostAsyncTask</a>
</li>
<li>PUT - <a href="https://github.com/47deg/restrung/blob/master/src/main/java/org/restrung/rest/async/asynctasks/APIPutAsyncTask.java">org.restrung.rest.async.asynctasks.APIPutAsyncTask</a>
</li>
<li>DELETE - <a href="https://github.com/47deg/restrung/blob/master/src/main/java/org/restrung/rest/async/asynctasks/APIDeleteAsyncTask.java">org.restrung.rest.async.asynctasks.APIDeleteAsyncTask</a>
</li>
</ul><h3>Runnables</h3>

<ul>
<li>GET - <a href="https://github.com/47deg/restrung/blob/master/src/main/java/org/restrung/rest/async/runnables/GetRunnable.java">org.restrung.rest.async.runnables.GetRunnable</a>
</li>
<li>POST - <a href="https://github.com/47deg/restrung/blob/master/src/main/java/org/restrung/rest/async/runnables/PostRunnable.java">org.restrung.rest.async.runnables.PostRunnable</a>
</li>
<li>PUT - <a href="https://github.com/47deg/restrung/blob/master/src/main/java/org/restrung/rest/async/runnables/PutRunnable.java">org.restrung.rest.async.runnables.PutRunnable</a>
</li>
<li>DELETE - <a href="https://github.com/47deg/restrung/blob/master/src/main/java/org/restrung/rest/async/runnables/DeleteRunnable.java">org.restrung.rest.async.runnables.DeleteRunnable</a>
</li>
</ul><h3>Cache</h3>

<p>Restrung includes a cache mechanism to help fast retrieval of GET request responses.
Restrung uses the request parameters and components to create a unique ID used as cache key.</p>

<p>e.g.</p>

<p><em>Load always from cache</em></p>

<div class="highlight"><pre><span class="n">RestClientFactory</span><span class="o">.</span><span class="na">getClient</span><span class="o">().</span><span class="na">getAsync</span><span class="o">(</span>
    <span class="k">new</span> <span class="n">ContextAwareAPIDelegate</span><span class="o">&lt;</span><span class="n">Target</span><span class="o">&gt;(</span><span class="n">context</span><span class="o">,</span> <span class="n">Target</span><span class="o">.</span><span class="na">class</span><span class="o">,</span> <span class="n">RequestCache</span><span class="o">.</span><span class="na">LoadPolicy</span><span class="o">.</span><span class="na">ENABLED</span><span class="o">)</span> <span class="o">{</span>

<span class="o">...</span>

<span class="o">},</span> <span class="s">"http://url/%s/%s"</span><span class="o">,</span> <span class="s">"param1"</span><span class="o">,</span> <span class="s">"param2"</span><span class="o">);</span>
</pre></div>

<p><em>Load always from cache if there is no internet connection</em></p>

<div class="highlight"><pre><span class="n">RestClientFactory</span><span class="o">.</span><span class="na">getClient</span><span class="o">().</span><span class="na">getAsync</span><span class="o">(</span>
    <span class="k">new</span> <span class="n">ContextAwareAPIDelegate</span><span class="o">&lt;</span><span class="n">Target</span><span class="o">&gt;(</span><span class="n">context</span><span class="o">,</span> <span class="n">Target</span><span class="o">.</span><span class="na">class</span><span class="o">,</span> <span class="n">RequestCache</span><span class="o">.</span><span class="na">LoadPolicy</span><span class="o">.</span><span class="na">LOAD_IF_OFFLINE</span><span class="o">)</span> <span class="o">{</span>

<span class="o">...</span>

<span class="o">},</span> <span class="s">"http://url/%s/%s"</span><span class="o">,</span> <span class="s">"param1"</span><span class="o">,</span> <span class="s">"param2"</span><span class="o">);</span>
</pre></div>

<h4>Load Policies</h4>

<p>The cache load policies available are:</p>

<ul>
<li>NEVER - Never use the cache.</li>
<li>LOAD_IF_OFFLINE - Load from the cache when the app is offline.</li>
<li>LOAD_ON_ERROR - Load from cache if there is an error.</li>
<li>ETAG - Load from the cache if we have data stored and the server returns a 304 (not modified) response.</li>
<li>ENABLED - Load always from the cache if available.</li>
<li>LOAD_IF_TIMEOUT - Load from the cache when the request times out.</li>
<li>NETWORK_ENABLED - Load from the cache then refresh the cache with a network call (calls onResult in the APIDelegate twice)</li>
</ul><h4>Direct access</h4>

<p>Access objects in the cache, invalidate, put and perform many other operations directly via the static methods at
<a href="https://github.com/47deg/restrung/blob/master/src/main/java/org/restrung/rest/cache/RequestCache.java">org.restrung.rest.cache.RequestCache</a> class.</p>

<h3>Serialization</h3>

<p>Restrung comes with abstract classes that implement most of the tedious work related to serialize/deserialize <a href="http://en.wikipedia.org/wiki/JavaBeans">javabeans</a> from and to <a href="http://en.wikipedia.org/wiki/JSON">JSON</a>.
To have your beans autoserialized when being sent as a request body in both POST and PUT request make your class extend from
<a href="https://github.com/47deg/restrung/blob/master/src/main/java/org/restrung/rest/marshalling/request/AbstractJSONRequest.java">org.restrung.rest.marshalling.request.AbstractJSONRequest</a> or provide your
own implementation of <a href="https://github.com/47deg/restrung/blob/master/src/main/java/org/restrung/rest/marshalling/request/JSONSerializable.java">org.restrung.rest.marshalling.request.JSONSerializable</a></p>

<p>To have your beans autoserialized when receiving a response body in make your class extend from
<a href="https://github.com/47deg/restrung/blob/master/src/main/java/org/restrung/rest/marshalling/response/AbstractJSONResponse.java">org.restrung.rest.marshalling.response.AbstractJSONResponse</a> or provide your
own implementation of <a href="https://github.com/47deg/restrung/blob/master/src/main/java/org/restrung/rest/marshalling/response/JSONResponse.java">org.restrung.rest.marshalling.response.JSONResponse</a></p>

<h3>Interceptors</h3>

<p>You can customize the request before being sent by overriding <strong>onRequest(RequestOperation)</strong> in your APIDelegate.
Same applies for the response before being serialized. Simply override <strong>onResponse(ResponseOperation)</strong> in your APIDelegate.</p>

<p>e.g.</p>

<div class="highlight"><pre><span class="n">RestClientFactory</span><span class="o">.</span><span class="na">getClient</span><span class="o">().</span><span class="na">getAsync</span><span class="o">(</span><span class="k">new</span> <span class="n">ContextAwareAPIDelegate</span><span class="o">&lt;</span><span class="n">Target</span><span class="o">&gt;(</span><span class="n">context</span><span class="o">,</span> <span class="n">Target</span><span class="o">.</span><span class="na">class</span><span class="o">)</span> <span class="o">{</span>

    <span class="o">...</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onRequest</span><span class="o">(</span><span class="n">RequestOperation</span> <span class="n">operation</span><span class="o">)</span> <span class="o">{</span>
        <span class="c1">//add request headers, setup basic auth, ...</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onResponse</span><span class="o">(</span><span class="n">ResponseOperation</span> <span class="n">operation</span><span class="o">)</span> <span class="o">{</span>
        <span class="c1">// intercept status code, ...</span>
    <span class="o">}</span>

<span class="o">},</span> <span class="s">"http://url/%s/%s"</span><span class="o">,</span> <span class="s">"param1"</span><span class="o">,</span> <span class="s">"param2"</span><span class="o">);</span>
</pre></div>
      </section>
    </div>

    <!-- FOOTER  -->
    <div id="footer_wrap" class="outer">
      <footer class="inner">
        <p class="copyright">Restrung maintained by <a href="https://github.com/47deg">47deg</a></p>
        <p>Published with <a href="http://pages.github.com">GitHub Pages</a></p>
      </footer>
    </div>

              <script type="text/javascript">
            var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
            document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
          </script>
          <script type="text/javascript">
            try {
              var pageTracker = _gat._getTracker("UA-18433785-2");
            pageTracker._trackPageview();
            } catch(err) {}
          </script>


  </body>
</html>
